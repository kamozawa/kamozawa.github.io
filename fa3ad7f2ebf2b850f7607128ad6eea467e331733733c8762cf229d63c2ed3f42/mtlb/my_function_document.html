
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>MATLAB&reg; TM-Lab Package Documentation</title><meta name="generator" content="MATLAB 9.12"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2022-05-09"><meta name="DC.source" content="my_function_document.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>MATLAB&reg; TM-Lab Package Documentation</h1><!--introduction--><p>&#12371;&#12398;&#12486;&#12461;&#12473;&#12488;&#12399;TM-Lab&#29992;&#12398;MATLAB&#12497;&#12483;&#12465;&#12540;&#12472;&#12398;&#12489;&#12461;&#12517;&#12513;&#12531;&#12488;&#12391;&#12377;&#12290; &#20006;&#12403;&#12399;&#12363;&#12394;&#12426;&#12486;&#12461;&#12488;&#12540;&#12394;&#12398;&#12391;&#65292;ctrl+F&#12392;&#12363;&#12391;&#12394;&#12435;&#12392;&#12363;&#25506;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">zeros_like(x)</a></li><li><a href="#3">plt(x, y, x_label, y_label, linecolor, linewidth)</a></li><li><a href="#5">p_color(X, Y, Z, x_label, y_label, c_label, cmap, norm, method)</a></li><li><a href="#7">get_filename(extension, path, absolute)</a></li><li><a href="#8">pemphasis(x, p)</a></li><li><a href="#10">attractor(x, period, fs, display, newfig, Xauto, Yauto)</a></li></ul></div><h2 id="1">zeros_like(x)</h2><p>&#20837;&#21147;&#37197;&#21015;&#12392;&#21516;&#12376;&#12469;&#12452;&#12474;&#12398;&#12476;&#12525;&#37197;&#21015;&#12434;&#36820;&#12377;&#38306;&#25968;&#12391;&#12377;&#12290; Python&#12398;Numpy&#12395;&#23455;&#35013;&#12373;&#12428;&#12390;&#12356;&#12427;numpy.zeros_like()&#12392;&#21516;&#12376;&#12391;&#12377;&#12290;</p><p><b>Argument</b></p><div><ul><li>x  (array; double): &#20837;&#21147;&#37197;&#21015;&#12290;</li></ul></div><p><b>Return</b></p><div><ul><li>y (array; double): x&#12392;&#21516;&#12376;&#12469;&#12452;&#12474;&#12434;&#12418;&#12388;&#12476;&#12525;&#37197;&#21015;&#12290;</li></ul></div><pre class="codeinput">x = [1 2 3;
        4 5 6];

y = zeros_like(x);

size(x)
size(y)
</pre><pre class="codeoutput">
ans =

     2     3


ans =

     2     3

</pre><p>&#19978;&#12398;&#20363;&#12391;&#12399;&#65292;2&#34892;3&#21015;&#12398;&#34892;&#21015;x&#12434;&#20316;&#25104;&#12375;&#12383;&#24460;&#65292;&#12381;&#12428;&#12392;&#21516;&#12376;&#12469;&#12452;&#12474;&#12398;&#12476;&#12525;&#34892;&#21015;y&#12434;&#20316;&#25104;&#12377;&#12427;&#20363;&#12391;&#12377;&#12290;</p><h2 id="3">plt(x, y, x_label, y_label, linecolor, linewidth)</h2><p>&#38498;&#12476;&#12511;&#12420;&#35542;&#25991;&#29992;&#12395;&#23567;&#32186;&#40599;&#12394;&#22259;&#12434;&#29992;&#24847;&#12377;&#12427;&#12383;&#12417;&#12398;&#38306;&#25968;&#12391;&#12377;&#12290; 1&#27425;&#20803;&#12487;&#12540;&#12479;&#12398;&#12503;&#12525;&#12483;&#12488;&#12434;&#31777;&#21336;&#12395;&#34892;&#12360;&#12414;&#12377;&#12290;</p><p><b>Argument</b></p><div><ul><li>x (array; double): &#26178;&#38291;&#36600;&#37197;&#21015;&#12290;</li></ul></div><div><ul><li>y (array; double): &#12503;&#12525;&#12483;&#12488;&#12377;&#12427;&#37197;&#21015;&#12290;x&#12392;&#21516;&#12469;&#12452;&#12474;&#12398;&#24517;&#35201;&#12364;&#12354;&#12427;&#12290;</li></ul></div><div><ul><li>x_label (str, char): x&#36600;&#12521;&#12505;&#12523;&#12290;</li></ul></div><div><ul><li>y_label (str, char): y&#36600;&#12521;&#12505;&#12523;&#12290;</li></ul></div><div><ul><li>linecolor (str, chr): &#12503;&#12525;&#12483;&#12488;&#12398;&#33394;&#12434;&#25351;&#23450;&#12290;&#12487;&#12501;&#12457;&#12523;&#12488;&#12399;&#40658;&#12290;</li></ul></div><div><ul><li>linewidth (double): &#12503;&#12525;&#12483;&#12488;&#32218;&#12398;&#22826;&#12373;&#12434;&#25351;&#23450;&#12290;&#12487;&#12501;&#12457;&#12523;&#12488;&#12399;1.0&#12290;</li></ul></div><p><b>Return</b></p><div><ul><li>f (figure): figure&#12495;&#12531;&#12489;&#12523;&#12290;</li></ul></div><pre class="codeinput">load <span class="string">mit200</span>  <span class="comment">% MATLAB&#12395;&#12487;&#12501;&#12457;&#12523;&#12488;&#12391;&#20837;&#12387;&#12390;&#12356;&#12427;&#24515;&#38651;&#22259;&#12469;&#12531;&#12503;&#12523;&#12487;&#12540;&#12479;</span>

[~] = plt(tm, ecgsig);  <span class="comment">% &#24515;&#38651;&#22259;&#12487;&#12540;&#12479;&#12434;&#12503;&#12525;&#12483;&#12488;</span>
xlim([0 10])
ylim([-2.4 1.4])

[~] = plt(tm, ecgsig, <span class="string">"Time [s]"</span>, <span class="string">"Amplitude [mV]"</span>, <span class="string">"b"</span>, 1.25);  <span class="comment">% &#32218;&#12434;&#38738;&#12367;&#22826;&#12367;&#12377;&#12427;</span>
xlim([15 25])
</pre><img vspace="5" hspace="5" src="my_function_document_01.png" alt=""> <img vspace="5" hspace="5" src="my_function_document_02.png" alt=""> <p>&#19978;&#12398;&#20363;&#12398;&#12424;&#12358;&#12395;&#65292;plt&#38306;&#25968;&#12398;&#20351;&#29992;&#24460;&#12395;xlim&#12420;ylim&#12434;&#35373;&#23450;&#12377;&#12427;&#12371;&#12392;&#12391;&#24494;&#35519;&#25972;&#12418;&#21487;&#33021;&#12391;&#12377;&#12290; fig&#12501;&#12449;&#12452;&#12523;&#12418;&#19968;&#32210;&#12395;&#20445;&#23384;&#12377;&#12427;&#12371;&#12392;&#12434;&#12362;&#21223;&#12417;&#12375;&#12414;&#12377;&#12290;</p><h2 id="5">p_color(X, Y, Z, x_label, y_label, c_label, cmap, norm, method)</h2><p>&#38498;&#12476;&#12511;&#12420;&#35542;&#25991;&#29992;&#12395;&#23567;&#32186;&#40599;&#12394;&#22259;&#12434;&#29992;&#24847;&#12377;&#12427;&#12383;&#12417;&#12398;&#38306;&#25968;&#12391;&#12377;&#12290; 2&#27425;&#20803;&#37197;&#21015;&#12398;&#12459;&#12521;&#12540;&#12503;&#12525;&#12483;&#12488;&#12434;&#31777;&#21336;&#12395;&#34892;&#12360;&#12414;&#12377;&#12290; &#12473;&#12506;&#12463;&#12488;&#12525;&#12464;&#12521;&#12512;&#12394;&#12393;&#12398;&#25551;&#30011;&#12395;&#26368;&#36969;&#12391;&#12377;&#12290;</p><p><b>Argument</b></p><div><ul><li>X (array; double): &#27178;&#36600;&#12398;&#37197;&#21015;&#12290;</li></ul></div><div><ul><li>Y (array; double): &#32294;&#36600;&#12398;&#37197;&#21015;&#12290;</li></ul></div><div><ul><li>Z (array; double): &#12503;&#12525;&#12483;&#12488;&#12377;&#12427;2&#27425;&#20803;&#37197;&#21015;&#12290;</li></ul></div><div><ul><li>x_label (str, char): x&#36600;&#12398;&#12521;&#12505;&#12523;&#12290;</li></ul></div><div><ul><li>y_label (str, char): y&#36600;&#12398;&#12521;&#12505;&#12523;&#12290;</li></ul></div><div><ul><li>c_label (str, char): &#12459;&#12521;&#12540;&#12496;&#12540;&#12395;&#34920;&#31034;&#12377;&#12427;&#12521;&#12505;&#12523;&#12290;</li></ul></div><div><ul><li>cmap (str, char): &#36969;&#29992;&#12377;&#12427;&#12459;&#12521;&#12540;&#12510;&#12483;&#12503;&#12398;&#21517;&#21069;&#12290;&#12487;&#12501;&#12457;&#12523;&#12488;&#12399;viridis&#65288;Python&#12398;Matplotlib&#12392;&#21516;&#12376;&#65289;&#12290;</li></ul></div><div><ul><li>alpha (double): &#12459;&#12521;&#12540;&#12510;&#12483;&#12503;&#12398;&#36879;&#26126;&#24230;&#12290;&#12487;&#12501;&#12457;&#12523;&#12488;&#12399;1&#12290;&#36879;&#26126;&#24230;&#12476;&#12525;&#12364;1&#12394;&#12398;&#12391;&#27880;&#24847;&#12290;</li></ul></div><div><ul><li>norm (numeric, logical): true&#12434;&#25351;&#23450;&#12375;&#12383;&#22580;&#21512;&#65292;&#37197;&#21015;Z&#12434;method&#12398;&#26041;&#27861;&#12395;&#12424;&#12387;&#12390;&#27491;&#35215;&#21270;&#12375;&#12414;&#12377;&#12290;</li></ul></div><div><ul><li>method (str, char): &#27491;&#35215;&#21270;&#26041;&#27861;&#12290;&#12487;&#12501;&#12457;&#12523;&#12488;&#12399;range&#12290;range&#12399;0&#65374;1&#12398;&#31684;&#22258;&#12395;&#27491;&#35215;&#21270;&#12377;&#12427;&#12290;zscore&#12420;center, scale&#12394;&#12393;&#12364;&#20351;&#29992;&#21487;&#33021;&#12290;</li></ul></div><p><b>Returns</b></p><div><ul><li>f (figure): figure&#12495;&#12531;&#12489;&#12523;&#12290;</li></ul></div><pre class="codeinput">[audio, fs] = audioread(<span class="string">'stop_command.flac'</span>);  <span class="comment">% &#38899;&#22768;&#20449;&#21495;&#12434;&#12525;&#12540;&#12489;</span>

<span class="comment">% &#38899;&#22768;&#20449;&#21495;&#12434;&#30701;&#26178;&#38291;&#12501;&#12540;&#12522;&#12456;&#22793;&#25563;</span>
[mag, ~, time] = stft(audio, fs, <span class="string">'Window'</span>, hamming(128), <span class="string">'OverlapLength'</span>, 64, <span class="string">'FFTLength'</span>, 2^10, <span class="keyword">...</span>
    <span class="string">'FrequencyRange'</span>, <span class="string">'onesided'</span>);
mag = 20 * log10(abs(mag).^2);  <span class="comment">% dB&#12395;&#22793;&#25563;</span>

<span class="comment">% &#12503;&#12525;&#12483;&#12488;&#12377;&#12427;</span>
[~] = p_color(time, linspace(0, fs/2, numel(mag(:, 1)))./1e3, mag, <span class="string">"Time [s]"</span>, <span class="string">"Frequency [Hz]"</span>, <span class="string">"Magnitude [dB]"</span>, <span class="string">"viridis"</span>);
</pre><img vspace="5" hspace="5" src="my_function_document_03.png" alt=""> <p>&#12385;&#12394;&#12415;&#12395;&#65292;[~]&#12392;&#12356;&#12358;&#35352;&#27861;&#12399;&#65292;&#12300;&#25147;&#12426;&#20516;&#65288;&#12371;&#12398;&#22580;&#21512;&#12399;figure&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#65289;&#12399;&#35201;&#12425;&#12394;&#12356;&#12424;&#12301;&#12392;&#12356;&#12358;&#24847;&#21619;&#12391;&#12377;&#12290; &#12418;&#12358;&#20351;&#12431;&#12394;&#12356;&#22793;&#25968;&#12364;&#25147;&#12426;&#20516;&#12392;&#12394;&#12427;&#22580;&#21512;&#12399;&#65292;&#12371;&#12398;&#12424;&#12358;&#12395;&#30465;&#30053;&#12377;&#12427;&#12371;&#12392;&#12391;&#20966;&#29702;&#12398;&#39640;&#36895;&#21270;&#12392;&#12513;&#12514;&#12522;&#12398;&#21066;&#28187;&#12395;&#12388;&#12394;&#12364;&#12426;&#12414;&#12377;&#12290;</p><h2 id="7">get_filename(extension, path, absolute)</h2><p>&#25351;&#23450;&#12375;&#12383;&#25313;&#24373;&#23376;&#12434;&#12418;&#12388;&#12501;&#12449;&#12452;&#12523;&#21517;&#12398;&#12522;&#12473;&#12488;&#12434;&#21462;&#24471;&#12377;&#12427;&#38306;&#25968;&#12391;&#12377;&#12290; csv&#24418;&#24335;&#12398;&#28204;&#23450;&#12487;&#12540;&#12479;&#12394;&#12393;&#12434;&#12414;&#12392;&#12417;&#12390;&#20966;&#29702;&#12375;&#12383;&#12356;&#22580;&#21512;&#12395;&#20415;&#21033;&#12391;&#12377;&#12290;</p><p><b>Argument</b></p><div><ul><li>extension (str, char): &#21462;&#24471;&#12375;&#12383;&#12356;&#12501;&#12449;&#12452;&#12523;&#21517;&#12398;&#25313;&#24373;&#23376;&#12290;&#12500;&#12522;&#12458;&#12489;&#12399;&#12388;&#12369;&#12394;&#12356;&#12371;&#12392;&#12290;</li></ul></div><div><ul><li>path (str, char): &#26908;&#32034;&#12377;&#12427;&#12501;&#12457;&#12523;&#12480;&#12398;&#12497;&#12473;&#12290;&#32118;&#23550;&#12497;&#12473;&#12364;&#26395;&#12414;&#12375;&#12356;&#12290;&#12487;&#12501;&#12457;&#12523;&#12488;&#12399;&#12459;&#12524;&#12531;&#12488;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12290;</li></ul></div><div><ul><li>absolute (numeric, logical): 1&#12414;&#12383;&#12399;true&#12434;&#25351;&#23450;&#12377;&#12427;&#12392;&#12522;&#12473;&#12488;&#12434;&#32118;&#23550;&#12497;&#12473;&#24418;&#24335;&#12391;&#36820;&#12375;&#12414;&#12377;&#12290;&#12487;&#12501;&#12457;&#12523;&#12488;&#12399;true&#12290;</li></ul></div><p><b>Return</b></p><div><ul><li>files (strings): &#12501;&#12449;&#12452;&#12523;&#21517;&#12398;&#12497;&#12473;&#12398;&#12522;&#12473;&#12488;&#12290;</li></ul></div><h2 id="8">pemphasis(x, p)</h2><p>&#12503;&#12522;&#12456;&#12531;&#12501;&#12449;&#12471;&#12473;&#12501;&#12451;&#12523;&#12479;&#12395;&#12424;&#12387;&#12390;&#20449;&#21495;&#12398;&#39640;&#21608;&#27874;&#25968;&#25104;&#20998;&#12434;&#24375;&#35519;&#12375;&#12414;&#12377;&#12290; &#12362;&#12418;&#12395;&#38899;&#22768;&#20998;&#37326;&#12395;&#12362;&#12356;&#12390;&#29992;&#12356;&#12425;&#12428;&#12427;&#12371;&#12392;&#12364;&#22810;&#12367;&#65292;MFCC&#29987;&#31639;&#20986;&#26178;&#12398;&#21069;&#20966;&#29702;&#12392;&#12375;&#12390;&#26377;&#21517;&#12391;&#12377;&#12290; &#65288;&#24330;&#30740;&#31350;&#23460;&#12398;HI&#29677;&#12399;&#12371;&#12398;&#20966;&#29702;&#12434;&#12375;&#12390;&#12356;&#12394;&#12356;&#12424;&#12358;&#12391;&#12377;&#12364;&#8230;&#65289;</p><p>&#12385;&#12394;&#12415;&#12395;&#65292;&#12371;&#12398;&#12501;&#12451;&#12523;&#12479;&#12399;&#12501;&#12451;&#12523;&#12479;&#20418;&#25968;&#12364;[1, -p]&#12398;FIR&#12501;&#12451;&#12523;&#12479;&#12392;&#31561;&#20385;&#12391;&#12354;&#12426;&#65292;&#12411;&#12392;&#12435;&#12393; &#25968;&#20516;&#24494;&#20998;&#65288;&#21069;&#24460;2&#20516;&#24046;&#20998;&#65289;&#12434;&#12392;&#12387;&#12383;&#12424;&#12358;&#12394;&#24418;&#12395;&#12394;&#12426;&#12414;&#12377;&#12290; &#12375;&#12383;&#12364;&#12387;&#12390;&#65292;&#22793;&#21270;&#12364;&#24613;&#23803;&#12394;&#37096;&#20998;&#65292;&#12377;&#12394;&#12431;&#12385;&#21608;&#27874;&#25968;&#25104;&#20998;&#12398;&#22823;&#12365;&#12394;&#12392;&#12371;&#12429;&#12399;&#24375;&#35519;&#12373;&#12428;&#12427;&#12431;&#12369;&#12391;&#12377;&#12290;</p><p><b>Argument</b></p><div><ul><li>x (array; double): 1&#27425;&#20803;&#20449;&#21495;&#12398;&#37197;&#21015;&#12290;</li></ul></div><div><ul><li>p (double): &#12503;&#12522;&#12456;&#12531;&#12501;&#12449;&#12471;&#12473;&#20418;&#25968;&#12290;&#12487;&#12501;&#12457;&#12523;&#12488;&#12399;0.97&#12290;&#38899;&#22768;&#35469;&#35672;&#20998;&#37326;&#12391;&#12399;&#12371;&#12398;&#20516;&#12364;&#29992;&#12356;&#12425;&#12428;&#12427;&#12290;</li></ul></div><p><b>Returns</b></p><div><ul><li>y (array; double): &#20966;&#29702;&#24460;&#12398;&#20449;&#21495;&#12290;</li></ul></div><pre class="codeinput">load <span class="string">mtlb</span>  <span class="comment">% &#12487;&#12501;&#12457;&#12523;&#12488;&#12391;&#20837;&#12387;&#12390;&#12356;&#12427;&#38899;&#22768;&#12487;&#12540;&#12479;&#12434;&#12525;&#12540;&#12489;</span>

<span class="comment">% &#38899;&#22768;&#20449;&#21495;&#12434;&#30701;&#26178;&#38291;&#12501;&#12540;&#12522;&#12456;&#22793;&#25563;</span>
[mag, ~, time] = stft(mtlb, Fs, <span class="string">'Window'</span>, hamming(100), <span class="string">'OverlapLength'</span>, 90, <span class="string">'FFTLength'</span>, 128, <span class="keyword">...</span>
    <span class="string">'FrequencyRange'</span>, <span class="string">'onesided'</span>);
mag = 20 * log10(abs(mag).^2);  <span class="comment">% dB&#12395;&#22793;&#25563;</span>
<span class="comment">% &#12503;&#12525;&#12483;&#12488;&#12377;&#12427;</span>
[~] = p_color(time, linspace(0, Fs/2, numel(mag(:, 1)))./1e3, mag, <span class="string">"Time [ms]"</span>, <span class="string">"Frequency [kHz]"</span>, <span class="keyword">...</span>
    <span class="string">"Normalized Magnitude"</span>, <span class="string">"viridis"</span>, 1, true, <span class="string">"range"</span>);
xlim([0.05 0.5])

<span class="comment">% &#12503;&#12522;&#12456;&#12531;&#12501;&#12449;&#12471;&#12473;&#12501;&#12451;&#12523;&#12479;&#12434;&#36969;&#29992;&#12375;&#12383;&#38899;&#22768;&#20449;&#21495;&#12434;&#30701;&#26178;&#38291;&#12501;&#12540;&#12522;&#12456;&#22793;&#25563;</span>
[mag_2, ~, ~] = stft(pemphasis(mtlb), Fs, <span class="string">'Window'</span>, hamming(100), <span class="string">'OverlapLength'</span>, 90, <span class="string">'FFTLength'</span>, 128, <span class="keyword">...</span>
    <span class="string">'FrequencyRange'</span>, <span class="string">'onesided'</span>);
mag_2 = 20 * log10(abs(mag_2).^2);  <span class="comment">% dB&#12395;&#22793;&#25563;</span>
<span class="comment">% &#12503;&#12525;&#12483;&#12488;&#12377;&#12427;</span>
[~] = p_color(time, linspace(0, Fs/2, numel(mag(:, 1)))./1e3, mag_2, <span class="string">"Time [ms]"</span>, <span class="string">"Frequency [kHz]"</span>, <span class="keyword">...</span>
    <span class="string">"Normalized Magnitude"</span>, <span class="string">"viridis"</span>, 1, true, <span class="string">"range"</span>);
xlim([0.05 0.5])
</pre><img vspace="5" hspace="5" src="my_function_document_04.png" alt=""> <img vspace="5" hspace="5" src="my_function_document_05.png" alt=""> <p>&#12503;&#12522;&#12456;&#12531;&#12501;&#12449;&#12471;&#12473;&#12501;&#12451;&#12523;&#12479;&#12434;&#36969;&#29992;&#12375;&#12383;&#22580;&#21512;&#65288;&#19979;&#22259;&#65289;&#12395;&#24195;&#22495;&#12364;&#24375;&#35519;&#12373;&#12428;&#12390;&#12356;&#12427;&#12371;&#12392;&#12364;&#30906;&#35469;&#12391;&#12365;&#12414;&#12377;&#12290;</p><h2 id="10">attractor(x, period, fs, display, newfig, Xauto, Yauto)</h2><p>&#26178;&#31995;&#21015;&#20449;&#21495;&#12434;&#36933;&#24310;&#24231;&#27161;&#31995;&#12408;&#39131;&#12400;&#12375;&#12390;&#12450;&#12488;&#12521;&#12463;&#12479;&#12434;&#35336;&#31639;&#12375;&#65292;&#12381;&#12398;&#24460;2&#27425;&#20803;&#24179;&#38754;&#12408;&#20877;&#27083;&#25104;&#12375;&#12414;&#12377;&#12290;</p><p><b>Argument</b></p><div><ul><li>x (array; double): &#26178;&#31995;&#21015;&#20449;&#21495;&#12290;</li></ul></div><div><ul><li>period (double): &#20449;&#21495;&#12398;&#21608;&#26399;&#12290;&#38750;&#21608;&#26399;&#20449;&#21495;&#12398;&#22580;&#21512;&#12399;&#24179;&#22343;&#30340;&#12394;&#12418;&#12398;&#12391;&#12424;&#12356;&#12290;</li></ul></div><div><ul><li>fs (int): &#20449;&#21495;&#12398;&#12469;&#12531;&#12503;&#12522;&#12531;&#12464;&#21608;&#27874;&#25968;&#12290;</li></ul></div><div><ul><li>display (numeric, logical): true&#12434;&#25351;&#23450;&#12375;&#12383;&#22580;&#21512;&#65292;&#26178;&#38291;&#27874;&#24418;&#65292;&#12450;&#12488;&#12521;&#12463;&#12479;&#65292;&#20877;&#27083;&#25104;&#12450;&#12488;&#12521;&#12463;&#12479;&#12434;&#22259;&#31034;&#12375;&#12414;&#12377;&#12290;</li></ul></div><div><ul><li>newfig (numeric, logical): true&#12434;&#25351;&#23450;&#12375;&#12383;&#22580;&#21512;&#65292;&#26032;&#12383;&#12395;figure&#12434;&#29983;&#25104;&#12375;&#12414;&#12377;&#12290;&#36899;&#32154;&#30340;&#12395;&#12503;&#12525;&#12483;&#12488;&#12434;&#26356;&#26032;&#12375;&#12383;&#12356;&#22580;&#21512;&#12399;false&#12434;&#25351;&#23450;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;</li></ul></div><div><ul><li>Xauto (numeric, logical): true&#12434;&#25351;&#23450;&#12375;&#12383;&#22580;&#21512;&#65292;&#12503;&#12525;&#12483;&#12488;&#12398;x&#36600;&#12398;&#31684;&#22258;&#12364;&#21205;&#30340;&#12395;&#22793;&#21270;&#12375;&#12414;&#12377;&#12290;</li></ul></div><div><ul><li>Yauto (numeric, logical): true&#12434;&#25351;&#23450;&#12375;&#12383;&#22580;&#21512;&#65292;&#12503;&#12525;&#12483;&#12488;&#12398;y&#36600;&#12398;&#31684;&#22258;&#12364;&#21205;&#30340;&#12395;&#22793;&#21270;&#12375;&#12414;&#12377;&#12290;</li></ul></div><p><b>Returns</b></p><div><ul><li>xout (array; double): &#12450;&#12488;&#12521;&#12463;&#12479;&#12398;x&#26041;&#21521;&#12398;&#37197;&#21015;&#12290;&#36933;&#24310;&#12399;&#12394;&#12356;&#12290;</li></ul></div><div><ul><li>yout (array; double): &#12450;&#12488;&#12521;&#12463;&#12479;&#12398;y&#26041;&#21521;&#12398;&#37197;&#21015;&#12290;</li></ul></div><div><ul><li>zout (array; double): &#12450;&#12488;&#12521;&#12463;&#12479;&#12398;z&#26041;&#21521;&#12398;&#37197;&#21015;&#12290;</li></ul></div><div><ul><li>v (array; double): &#20877;&#27083;&#25104;&#12450;&#12488;&#12521;&#12463;&#12479;&#12398;&#24179;&#38754;&#12290;</li></ul></div><div><ul><li>w (array; double): &#20877;&#27083;&#25104;&#12450;&#12488;&#12521;&#12463;&#12479;&#12398;&#24179;&#38754;&#12290;</li></ul></div><pre class="codeinput">Fs = 1000;  <span class="comment">% 1 kHz&#12391;&#12469;&#12531;&#12503;&#12522;&#12531;&#12464;</span>
Period = 1;  <span class="comment">% &#21608;&#26399;&#12399;1&#31186;</span>
time = 0 : 1/Fs : 5*Period + 2/3*Period - 1/Fs;
Sinusoids = sin(2*pi*time/Period);  <span class="comment">% &#27491;&#24358;&#27874;&#12434;&#20316;&#25104;</span>

[~, ~, ~, ~, ~] = attractor(Sinusoids, Period, Fs, true);
</pre><img vspace="5" hspace="5" src="my_function_document_06.png" alt=""> <p>&#19978;&#12398;&#20363;&#12391;&#12399;&#65292;&#21336;&#32020;&#12394;&#27491;&#24358;&#27874;&#12398;&#20877;&#27083;&#25104;&#12450;&#12488;&#12521;&#12463;&#12479;&#12434;&#27714;&#12417;&#12390;&#12356;&#12414;&#12377;&#12290; &#26965;&#20870;&#12395;&#12394;&#12426;&#12414;&#12375;&#12383;&#12397;&#12290; &#12385;&#12394;&#12415;&#12395;&#65292;&#12494;&#12467;&#12462;&#12522;&#27874;&#12398;&#22580;&#21512;&#12399;&#20108;&#31561;&#36794;&#19977;&#35282;&#24418;&#12395;&#65292;&#30697;&#24418;&#27874;&#12398;&#22580;&#21512;&#12399;&#20845;&#35282;&#24418;&#12395;&#12394;&#12426;&#12414;&#12377;&#12290; &#12356;&#12429;&#12356;&#12429;&#35430;&#12375;&#12390;&#12415;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; &#29983;&#20307;&#20449;&#21495;&#12434;&#20837;&#21147;&#12377;&#12427;&#12392;&#65292;&#29305;&#24500;&#25277;&#20986;&#12392;&#12375;&#12390;&#12418;&#21033;&#29992;&#12391;&#12365;&#65292;&#30064;&#24120;&#26908;&#20986;&#31561;&#12408;&#12398;&#24540;&#29992;&#12418;&#26399;&#24453;&#12391;&#12365;&#12414;&#12377;&#12290;</p><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2022a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% MATLAB(R) TM-Lab Package Documentation
% このテキストはTM-Lab用のMATLABパッケージのドキュメントです。
% 並びはかなりテキトーなので，ctrl+Fとかでなんとか探してください。

%% zeros_like(x)
% 入力配列と同じサイズのゼロ配列を返す関数です。
% PythonのNumpyに実装されているnumpy.zeros_like()と同じです。
%
% *Argument*
%
% * x  (array; double): 入力配列。
%
% *Return*
% 
% * y (array; double): xと同じサイズをもつゼロ配列。
% 


x = [1 2 3;
        4 5 6];

y = zeros_like(x);

size(x)
size(y)

%%
% 上の例では，2行3列の行列xを作成した後，それと同じサイズのゼロ行列yを作成する例です。

%% plt(x, y, x_label, y_label, linecolor, linewidth)
% 院ゼミや論文用に小綺麗な図を用意するための関数です。
% 1次元データのプロットを簡単に行えます。
% 
% *Argument*
%
% * x (array; double): 時間軸配列。
%
% * y (array; double): プロットする配列。xと同サイズの必要がある。
% 
% * x_label (str, char): x軸ラベル。
% 
% * y_label (str, char): y軸ラベル。
% 
% * linecolor (str, chr): プロットの色を指定。デフォルトは黒。
% 
% * linewidth (double): プロット線の太さを指定。デフォルトは1.0。
% 
% *Return*
% 
% * f (figure): figureハンドル。
% 

load mit200  % MATLABにデフォルトで入っている心電図サンプルデータ

[~] = plt(tm, ecgsig);  % 心電図データをプロット
xlim([0 10])
ylim([-2.4 1.4])

[~] = plt(tm, ecgsig, "Time [s]", "Amplitude [mV]", "b", 1.25);  % 線を青く太くする
xlim([15 25])

%%
% 上の例のように，plt関数の使用後にxlimやylimを設定することで微調整も可能です。
% figファイルも一緒に保存することをお勧めします。

%% p_color(X, Y, Z, x_label, y_label, c_label, cmap, norm, method)
% 院ゼミや論文用に小綺麗な図を用意するための関数です。
% 2次元配列のカラープロットを簡単に行えます。
% スペクトログラムなどの描画に最適です。
% 
% *Argument*
%
% * X (array; double): 横軸の配列。
% 
% * Y (array; double): 縦軸の配列。
% 
% * Z (array; double): プロットする2次元配列。
% 
% * x_label (str, char): x軸のラベル。
% 
% * y_label (str, char): y軸のラベル。
% 
% * c_label (str, char): カラーバーに表示するラベル。
% 
% * cmap (str, char): 適用するカラーマップの名前。デフォルトはviridis（PythonのMatplotlibと同じ）。
% 
% * alpha (double): カラーマップの透明度。デフォルトは1。透明度ゼロが1なので注意。
%
% * norm (numeric, logical): trueを指定した場合，配列Zをmethodの方法によって正規化します。
% 
% * method (str, char): 正規化方法。デフォルトはrange。rangeは0～1の範囲に正規化する。zscoreやcenter, scaleなどが使用可能。
%
% *Returns*
% 
% * f (figure): figureハンドル。
% 


[audio, fs] = audioread('stop_command.flac');  % 音声信号をロード

% 音声信号を短時間フーリエ変換
[mag, ~, time] = stft(audio, fs, 'Window', hamming(128), 'OverlapLength', 64, 'FFTLength', 2^10, ...
    'FrequencyRange', 'onesided');
mag = 20 * log10(abs(mag).^2);  % dBに変換

% プロットする
[~] = p_color(time, linspace(0, fs/2, numel(mag(:, 1)))./1e3, mag, "Time [s]", "Frequency [Hz]", "Magnitude [dB]", "viridis");

%%
% ちなみに，[~]という記法は，「戻り値（この場合はfigureオブジェクト）は要らないよ」という意味です。
% もう使わない変数が戻り値となる場合は，このように省略することで処理の高速化とメモリの削減につながります。


%% get_filename(extension, path, absolute)
% 指定した拡張子をもつファイル名のリストを取得する関数です。
% csv形式の測定データなどをまとめて処理したい場合に便利です。
% 
% *Argument*
%
% * extension (str, char): 取得したいファイル名の拡張子。ピリオドはつけないこと。
%
% * path (str, char): 検索するフォルダのパス。絶対パスが望ましい。デフォルトはカレントディレクトリ。
% 
% * absolute (numeric, logical): 1またはtrueを指定するとリストを絶対パス形式で返します。デフォルトはtrue。
% 
% *Return*
% 
% * files (strings): ファイル名のパスのリスト。
% 

%% pemphasis(x, p)
% プリエンファシスフィルタによって信号の高周波数成分を強調します。
% おもに音声分野において用いられることが多く，MFCC産算出時の前処理として有名です。
% （弊研究室のHI班はこの処理をしていないようですが…）
% 
% ちなみに，このフィルタはフィルタ係数が[1, -p]のFIRフィルタと等価であり，ほとんど
% 数値微分（前後2値差分）をとったような形になります。
% したがって，変化が急峻な部分，すなわち周波数成分の大きなところは強調されるわけです。
% 
% *Argument*
%
% * x (array; double): 1次元信号の配列。
%
% * p (double): プリエンファシス係数。デフォルトは0.97。音声認識分野ではこの値が用いられる。
% 
% *Returns*
% 
% * y (array; double): 処理後の信号。
% 

load mtlb  % デフォルトで入っている音声データをロード

% 音声信号を短時間フーリエ変換
[mag, ~, time] = stft(mtlb, Fs, 'Window', hamming(100), 'OverlapLength', 90, 'FFTLength', 128, ...
    'FrequencyRange', 'onesided');
mag = 20 * log10(abs(mag).^2);  % dBに変換
% プロットする
[~] = p_color(time, linspace(0, Fs/2, numel(mag(:, 1)))./1e3, mag, "Time [ms]", "Frequency [kHz]", ...
    "Normalized Magnitude", "viridis", 1, true, "range");
xlim([0.05 0.5])

% プリエンファシスフィルタを適用した音声信号を短時間フーリエ変換
[mag_2, ~, ~] = stft(pemphasis(mtlb), Fs, 'Window', hamming(100), 'OverlapLength', 90, 'FFTLength', 128, ...
    'FrequencyRange', 'onesided');
mag_2 = 20 * log10(abs(mag_2).^2);  % dBに変換
% プロットする
[~] = p_color(time, linspace(0, Fs/2, numel(mag(:, 1)))./1e3, mag_2, "Time [ms]", "Frequency [kHz]", ...
    "Normalized Magnitude", "viridis", 1, true, "range");
xlim([0.05 0.5])

%%
% プリエンファシスフィルタを適用した場合（下図）に広域が強調されていることが確認できます。

%% attractor(x, period, fs, display, newfig, Xauto, Yauto)
% 時系列信号を遅延座標系へ飛ばしてアトラクタを計算し，その後2次元平面へ再構成します。
% 
% *Argument*
% 
% * x (array; double): 時系列信号。
% 
% * period (double): 信号の周期。非周期信号の場合は平均的なものでよい。
% 
% * fs (int): 信号のサンプリング周波数。
% 
% * display (numeric, logical): trueを指定した場合，時間波形，アトラクタ，再構成アトラクタを図示します。
% 
% * newfig (numeric, logical): trueを指定した場合，新たにfigureを生成します。連続的にプロットを更新したい場合はfalseを指定してください。
% 
% * Xauto (numeric, logical): trueを指定した場合，プロットのx軸の範囲が動的に変化します。
% 
% * Yauto (numeric, logical): trueを指定した場合，プロットのy軸の範囲が動的に変化します。
% 
% *Returns*
% 
% * xout (array; double): アトラクタのx方向の配列。遅延はない。
% 
% * yout (array; double): アトラクタのy方向の配列。
% 
% * zout (array; double): アトラクタのz方向の配列。
% 
% * v (array; double): 再構成アトラクタの平面。
% 
% * w (array; double): 再構成アトラクタの平面。
% 

Fs = 1000;  % 1 kHzでサンプリング  
Period = 1;  % 周期は1秒
time = 0 : 1/Fs : 5*Period + 2/3*Period - 1/Fs;
Sinusoids = sin(2*pi*time/Period);  % 正弦波を作成

[~, ~, ~, ~, ~] = attractor(Sinusoids, Period, Fs, true);

%%
% 上の例では，単純な正弦波の再構成アトラクタを求めています。
% 楕円になりましたね。
% ちなみに，ノコギリ波の場合は二等辺三角形に，矩形波の場合は六角形になります。
% いろいろ試してみてください。
% 生体信号を入力すると，特徴抽出としても利用でき，異常検出等への応用も期待できます。
% 




##### SOURCE END #####
--></body></html>